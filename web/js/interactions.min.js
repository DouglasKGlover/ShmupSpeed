function pad(e,t){return e=e.toString(),e.length<t?pad("0"+e,t):e}function countDown(){var e=10,t=100;score=0,pressing=0,countingDown=!0,$("#options").find("input").prop("disabled",!0),$(".sec").text("09");var n=setInterval(function(){0!=e?(e--,$(".sec").text(pad(e,2))):clearInterval(n)},1e3),a=setInterval(function(){0!=t?(t--,$(".msec").text(pad(t,2))):(t=99,$(".msec").text(pad(t,2))),0==e&&0==t&&(countdownDone=!0,platform=tmpPlatform,clearInterval(a),$("#options, #game").find("input").prop("disabled",!1),$(".tap-button").prop("disabled",!0))},10)}function reset(){countingDown=!1,countdownDone=!1,score=0,$(".sec").text("10"),$(".msec").text("00"),$(".counter").text("000"),$("#score").text("000"),$(".reset, .submit, #username input").prop("disabled",!0),$(".tap-button").prop("disabled",!1)}function submitScore(e){if(e.preventDefault(),""==$("#username").find("input").val())$("#errors").show(),setTimeout(function(){$("#errors").hide()},3e3);else{var t=new Date;$(".submit").prop("disabled","true"),$("#shmupbundle_score_dateCreated_year").val(t.getFullYear()),$("#shmupbundle_score_dateCreated_month").val(t.getMonth()+1),$("#shmupbundle_score_dateCreated_day").val(t.getDate()),$("#shmupbundle_score_score").val(score),$("#shmupbundle_score_platform").val(platform),$("#shmupbundle_score_name").val($("#username").find("input").val());var n=$("form[name='shmupbundle_score']").serialize();$.post(url,n,function(e){console.log(e.status)},"JSON")}}function updateScore(){$("#score").text(pad(score,3))}var countingDown=!1,countdownDone=!1,score=0,pressing=0,platform="unknown",tmpPlatform="unknown";!function(e,t,n,a,o,s,r){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,s=t.createElement(n),r=t.getElementsByTagName(n)[0],s.async=1,s.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(s,r)}(window,document,"script",0,"ga"),ga("create","UA-48989090-9","auto"),ga("send","pageview"),$(document).ready(function(){function e(){pressing++}function t(){pressing--,$("#game").hasClass("active")&&(countingDown||countDown(),countdownDone||0!==pressing||(score++,updateScore()))}$(window).keydown(function(){e()}),$(window).keyup(function(e){t(),tmpPlatform="keyboard",ga("send","event","Keyboard","Button pressed",e)}),$(".tap-button").click(function(n){e(),t(),tmpPlatform="touch",ga("send","event","Mobile","Tap pressed",n)});var n=new Gamepad;n.on("connect",function(e){ga("send","event","Gamepad","Gamepad detected",e)});for(var a in n._keyMapping.gamepad){var o=a.toString();n.on("press",o,function(t){e()})}for(var s in n._keyMapping.gamepad){var r=s.toString();n.on("release",r,function(e){t(),tmpPlatform="controller",ga("send","event","Gamepad","Gamepad pressed",e)})}$(".reset").click(function(){reset(),ga("send","event","Options","Reset")}),$(".submit").click(function(e){submitScore(e),ga("send","event","Options","Score submitted","Score: "+score)}),$("#this-year").text((new Date).getYear()+1900);var i=!1;$("input[type=button][class^=view-]").click(function(e){if(!$(this).hasClass("active")&&!i){var t=e.target.className.split("-")[1];i=!0,ga("send","pageview",t),$("#options").find("input").removeClass("active"),$(".wrapper").find("section").removeClass("active"),$(this).addClass("active"),setTimeout(function(){i=!1,$("#"+t).addClass("active")},500)}}),$("#cartridge").click(function(){ga("send","event","Cartridge","NES ROM downloaded")}),$("#extra-life").click(function(){ga("send","pageview","/Extra Life")})});