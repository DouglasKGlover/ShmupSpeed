function pad(e,t){return e=e.toString(),e.length<t?pad("0"+e,t):e}function countDown(){var e=10,t=100;score=0,pressing=0,countingDown=!0,$("#options").find("input").prop("disabled",!0),$(".sec").text("09");var n=setInterval(function(){0!=e?(e--,$(".sec").text(pad(e,2))):clearInterval(n)},1e3),o=setInterval(function(){0!=t?(t--,$(".msec").text(pad(t,2))):(t=99,$(".msec").text(pad(t,2))),0==e&&0==t&&(countdownDone=!0,platform=tmpPlatform,clearInterval(o),$("#options, #game").find("input").prop("disabled",!1),$(".tap-button").fadeOut(500).prop("disabled",!0),$("#share").fadeIn(500),$("#share").find("#share-fb").attr("href","https://www.facebook.com/sharer/sharer.php?u=http%3A//shmupspeed.com/score/"+score),$("#share").find("#share-tw").attr("href","https://twitter.com/intent/tweet?url=www.shmupspeed.com&text=I%20just%20scored%20"+score+"%20on%20#ShmupSpeed!%20Finger%20dexterity%20game%20on%20point!"))},10)}function reset(){countingDown=!1,countdownDone=!1,score=0,$(".sec").text("10"),$(".msec").text("00"),$(".counter").text("000"),$("#score").text("000"),$(".reset, .submit, #username input").prop("disabled",!0),$("#share").fadeOut(500),$(".tap-button").fadeIn(500).prop("disabled",!1)}function submitScore(e){if(e.preventDefault(),""==$("#username").find("input").val())$("#errors").show(),setTimeout(function(){$("#errors").hide()},3e3);else{var t=new Date;$(".submit").prop("disabled","true"),$("#shmupbundle_score_dateCreated_year").val(t.getFullYear()),$("#shmupbundle_score_dateCreated_month").val(t.getMonth()+1),$("#shmupbundle_score_dateCreated_day").val(t.getDate()),$("#shmupbundle_score_score").val(score),$("#shmupbundle_score_platform").val(platform),$("#shmupbundle_score_name").val($("#username").find("input").val());var n=$("form[name='shmupbundle_score']").serialize();$.post(url,n,function(e){console.log(e.status)},"JSON")}}function updateScore(){$("#score").text(pad(score,3))}var countingDown=!1,countdownDone=!1,score=0,pressing=0,platform="unknown",tmpPlatform="unknown";!function(e,t,n,o,a,r,s){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,r=t.createElement(n),s=t.getElementsByTagName(n)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(r,s)}(window,document,"script",0,"ga"),ga("create","UA-48989090-9","auto"),ga("send","pageview"),$(document).ready(function(){function e(){pressing++}function t(){pressing--,$("#game").hasClass("active")&&(countingDown||countDown(),countdownDone||0!==pressing||(score++,updateScore()))}$(window).keydown(function(){e()}),$(window).keyup(function(e){t(),tmpPlatform="keyboard"}),$(".tap-button").click(function(n){e(),t(),tmpPlatform="touch"});var n=new Gamepad;n.on("connect",function(e){});for(var o in n._keyMapping.gamepad){var a=o.toString();n.on("press",a,function(t){e()})}for(var r in n._keyMapping.gamepad){var s=r.toString();n.on("release",s,function(e){t(),tmpPlatform="controller"})}$(".reset").click(function(){reset(),ga("send","event","Options","Reset")}),$(".submit").click(function(e){submitScore(e),ga("send","event","Options","Score submitted","Score: "+score)}),$("#this-year").text((new Date).getYear()+1900);var c=!1;$("input[type=button][class^=view-]").click(function(e){if(!$(this).hasClass("active")&&!c){var t=e.target.className.split("-")[1];c=!0,ga("send","pageview",t),$("#options").find("input").removeClass("active"),$(".wrapper").find("section").removeClass("active"),$(this).addClass("active"),setTimeout(function(){c=!1,$("#"+t).addClass("active")},500)}}),$("#cartridge").click(function(){ga("send","event","Cartridge","NES ROM downloaded")}),$("#share-fb, #share-tw").click(function(e){e.preventDefault();var t=$(this).attr("href");window.open(t,"Share your score","width=400,height=400,scrollbars=yes")}),$("#extra-life").click(function(){ga("send","pageview","/Extra Life")}),$("#share-fb").click(function(){ga("send","event","Share","Facebook Share","Shared score: "+score)}),$("#share-tw").click(function(){ga("send","event","Share","Twitter Share","Shared score: "+score)})});