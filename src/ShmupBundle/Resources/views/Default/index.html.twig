{% extends "ShmupBundle::master.html.twig" %}

{% block body %}
    <script>
        var url = "{{ path('score_new') }}";
    </script>

		{% include "ShmupBundle::partials/header.html.twig" %}

    {# Background animation (Stars) #}
		{% for i in 1..3 %}
        <div id="stars-{{ i }}" class="stars"></div>
    {% endfor %}

    {# Hidden form for submitting score #}
		<section id="score-form-hidden">
		{{ form_start(scoreForm) }}
        {{ form_row(scoreForm.name) }}
        {{ form_row(scoreForm.email) }}
        {{ form_row(scoreForm.score) }}
        {{ form_row(scoreForm.platform) }}
        {{ form_row(scoreForm.dateCreated) }}
		{{ form_end(scoreForm) }}
		</section>

    {# Options #}
    <section id="options">
        <input type="button" class="view-about" value="About" /> /
        <input type="button" class="view-support" value="Support" /> /
        <input type="button" class="view-game active" value="Game" /> /
        <input type="button" class="view-leaderboard" value="Leaderboard" /> /
        <input type="button" class="reset" value="Reset" disabled /> /
        <input type="button" class="submit" value="Submit Score" disabled />
    </section>

    <div class="wrapper">

        {# Current session info #}
        <section id="game" class="active">
            {# Timer #}
            {#<div id="timer" class="digital">#}
                {#<span class="sec">10</span>:<span class="msec">00</span>#}
            {#</div>#}
            <div id="timer" class="digital">00.00</div>

            {# User's Score #}
            <div id="score" class="digital">000</div>

            {# User's Name #}
            <div id="username">
                <input type="text" class="digital" placeholder="AAA" maxlength="3" disabled>
            </div>

            {# Errors #}
            <div id="errors">
                <p>Enter a name!</p>
            </div>

            {# Share #}
            <div id="share">
                <p>Share your score!</p>
                <a href="#" id="share-fb" title="Share on Facebook">
                    <img src="{{ asset('img/fb_logo.png') }}" alt="Facebook Logo">
                </a>&nbsp;&nbsp;
                <a href="#" id="share-tw" title="Share on Twitter">
                    <img src="{{ asset('img/tw_logo.png') }}" alt="Twitter Logo">
                </a>
            </div>

            {# Tap Buttons #}
            <div id="tap" class="mobile">
                <input type="button" value="A" class="tap-button">
                <input type="button" value="B" class="tap-button">
            </div>
        </section>

        {# Leaderboard #}
        <section id="leaderboard" class="digital">
            <div id="daily-highscore">
                <p>
                    Today's High Score:
                    {% for keyD, scoreD in scoresToday|slice(0, 1) %}
                        {{ scoreD.name|slice(0,3) }} - {{ scoreD.score }}
                    {% endfor %}
                </p>
            </div>
            <table>
                <tr>
                    <th colspan="3">Keyboard</th>
                </tr>
                <tr>
                    <th width="50px">#</th>
                    <th width="100px">Name</th>
                    <th width="100px">Score</th>
                </tr>
                {% for keyK, scoreK in scoresKeyboard|slice(0, 10) %}
                    <tr>
                        <td>{{ keyK+1 }}</td>
                        <td>{{ scoreK.name|slice(0,3) }}</td>
                        <td>{{ scoreK.score }}</td>
                    </tr>
                {% endfor %}
            </table>
            <table>
                <tr>
                    <th colspan="3">Controller</th>
                </tr>
                <tr>
                    <th width="50px">#</th>
                    <th width="100px">Name</th>
                    <th width="100px">Score</th>
                </tr>
                {% for keyT, scoreC in scoresController|slice(0, 10) %}
                    <tr>
                        <td>{{ keyT+1 }}</td>
                        <td>{{ scoreC.name|slice(0,3) }}</td>
                        <td>{{ scoreC.score }}</td>
                    </tr>
                {% endfor %}
            </table>
            <table>
                <tr>
                    <th colspan="3">Touchscreen</th>
                </tr>
                <tr>
                    <th width="50px">#</th>
                    <th width="100px">Name</th>
                    <th width="100px">Score</th>
                </tr>
                {% for keyT, scoreT in scoresTouch|slice(0, 10) %}
                    <tr>
                        <td>{{ keyT+1 }}</td>
                        <td>{{ scoreT.name|slice(0,3) }}</td>
                        <td>{{ scoreT.score }}</td>
                    </tr>
                {% endfor %}
            </table>
        </section>

        {# About #}
        <section id="about">
            <p>ShmupSpeed.com aims to provide a fun and accurate method of tracking your "Presses Per Second" (PPS). Shoot-em-up game fans work hard to press buttons super fast to kill alien scum and the like, and this site is here to help you practice and gauge your skills.</p>
            <p>Here on the site you can use your <strong>Keyboard</strong>, or any <strong>Gamepad controller</strong> connected to your PC to test your button mashing mettle. While on the GAME page just start pressing and the timer will start, and your score will go up! Divide by ten and you've got your PPS!</p>
            <p class="mobile">On your phone you can <strong>tap on the A & B buttons</strong> provided to test your skills on the go!</p>
            <p>The inspiration for this site was the Hudson Shooting Watches from Japan, which have not been available for sale since around 2008, shown below, and follows the same logic for calculating PPS:</p>
            <img src="{{ asset('img/hudson.png') }}" alt="Hudson Shooting Watch">
        </section>

        {# Support #}
        <section id="support">
            <p>I'm running this site totally out of pocket, and I am ok with that. If you like the site and want to show your support, the best way to do so would be to donate to charity!</p>
            <p>Every year I participate in <strong>Extra Life</strong>, raising funds for Sick Kids Hospital, supporting the kids who need it most.</p>
            <p>If you've got a few bucks to spare, you can visit my donor link here:<br/><br/>
                <strong><a href="https://www.extra-life.org/index.cfm?fuseaction=donorDrive.participant&participantID=247368" target="_blank" id="extra-life">Douglas Glover @ Extra Life</a></strong></p>
        </section>

    </div>

    {# Floating cartridge - download the NES ROM #}
    <section id="cartridge" class="desktop">
        <a href="{{ asset('rom/shmupspeed.nes') }}">
            <img src="{{ asset('img/cartridge.png') }}" alt="Shmup Speed NES Cartridge">
        </a>
    </section>

    {% include "ShmupBundle::partials/footer.html.twig" %}
{% endblock %}